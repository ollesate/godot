[gd_scene load_steps=4 format=2]

[ext_resource path="res://Assets/icon.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D

signal onHit

const SPEED = Global.BULLET_SPEED
const ROTATION_SPEED = 20.0
const MAX_TIME = 4.0

var direction
var duration = MAX_TIME
var playerOwner

func _ready():
	direction = Vector2(0, -1).rotated(rotation)
	
func _physics_process(delta):
	rotate(deg2rad(ROTATION_SPEED))
	move_and_slide(direction * SPEED)
	duration -= delta
	if get_slide_count() > 0:
		var collider = get_slide_collision(0).collider
		if (collider != get_parent() && collider.is_in_group(\"players\")):
			if (playerOwner != collider):
				collider.onHit(1)
		emit_signal(\"onHit\")
		free()
	elif duration < 0:
		emit_signal(\"onHit\")
		free()"

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 64, 64 )

[node name="Bullet" type="KinematicBody2D"]
position = Vector2( 0, -80 )
scale = Vector2( 0.2, 0.2 )
script = SubResource( 1 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 2 )
