[gd_scene load_steps=5 format=2]

[ext_resource path="res://Network.tscn" type="PackedScene" id=1]
[ext_resource path="res://player_hand.gd" type="Script" id=2]
[ext_resource path="res://PlayerHand/PlayerCard.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Control

func _ready():
	$CardHand.connect(\"onSwap\", self, \"CardHand_onSwap\")
	$Network.connect(\"onPlayerCards\", self, \"Network_onPlayerCards\")
	$Network.connect(\"onSimulationStart\", self, \"Network_onSimulationStart\")
	$Network.connect(\"onTokenHit\", self, \"Network_onTokenHit\")

func CardHand_onSwap(idx1, idx2):
	print(str(\"swap\", idx1, idx2))
	$Network.swapCards(idx1, idx2)
	
func Network_onPlayerCards(cardInfos):
	print(str(\"on player cards\", cardInfos))
	$CardHand.setCards(cardInfos)
	$CardHand.setLocked(false)
	
func Network_onSimulationStart():
	$CardHand.setLocked(true)

func Network_onTokenHit(hpLeft):
	print(\"on token hit\")
	$CardHand.hpLeft = hpLeft"

[node name="Root" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = SubResource( 1 )

[node name="Network" parent="." instance=ExtResource( 1 )]

[node name="CardHand" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 2 )
hpLeft = 10

[node name="PlayerCard" parent="CardHand" instance=ExtResource( 3 )]
anchor_right = 1.0
margin_left = 16.0
margin_top = 16.0
margin_right = -16.0
margin_bottom = 66.0

[node name="PlayerCard2" parent="CardHand" instance=ExtResource( 3 )]
anchor_right = 1.0
margin_left = 16.0
margin_top = 80.0
margin_right = -16.0
margin_bottom = 130.0

[node name="PlayerCard3" parent="CardHand" instance=ExtResource( 3 )]
anchor_right = 1.0
margin_left = 16.0
margin_top = 144.0
margin_right = -16.0
margin_bottom = 194.0

[node name="PlayerCard4" parent="CardHand" instance=ExtResource( 3 )]
anchor_right = 1.0
margin_left = 16.0
margin_top = 208.0
margin_right = -16.0
margin_bottom = 258.0

[node name="PlayerCard5" parent="CardHand" instance=ExtResource( 3 )]
anchor_right = 1.0
margin_left = 16.0
margin_top = 272.0
margin_right = -16.0
margin_bottom = 322.0
