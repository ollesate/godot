[gd_scene load_steps=4 format=2]

[ext_resource path="res://Network.tscn" type="PackedScene" id=1]
[ext_resource path="res://swatch.tscn" type="PackedScene" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Control

func _ready():
	$Network.connect(\"onConnectionFailed\", self, \"onConnectionFailed\")
	$PlayerLobby.connect(\"onReady\", self, \"onReady\")
	$PlayerLobby.connect(\"onUnready\", self, \"onUnready\")
	$PlayerLobby.connect(\"onInfoUpdated\", self, \"onInfoUpdated\")
	yield($Network, \"onGameStarted\")
	changeScene()
	
func onConnectionFailed():
	pass # show some message? and retry???

func onReady():
	$Network.rpc_id(0, \"playerReady\")
	
func onUnready():
	$Network.rpc_id(0, \"playerUnready\")

func onInfoUpdated(playerName, color):
	$Network.rpc_id(0, \"updateInfo\", playerName, color)
	
func changeScene():
	remove_child($PlayerLobby)
	var playerHand = load(\"res://player_hand.tscn\").instance()
	add_child(playerHand)"

[node name="PlayerScene" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = SubResource( 1 )

[node name="Network" parent="." instance=ExtResource( 1 )]

[node name="PlayerLobby" parent="." instance=ExtResource( 2 )]
